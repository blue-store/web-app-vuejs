(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0699":function(t,e,a){"use strict";a("a4a7")},1416:function(t,e,a){},4076:function(t,e,a){},"48e6":function(t,e,a){"use strict";a("1416")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=a("8c4f"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container my-5",attrs:{id:"app"}},[a("div",{staticClass:"row action-panel"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"btn-group btn-group-sm pull-right"},[a("button",{staticClass:"btn btn-outline-dark",attrs:{id:"list"},on:{click:function(e){return e.preventDefault(),t.changeDisplay(!0)}}},[a("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}}),t._v(" List ")]),a("button",{staticClass:"btn btn-outline-dark",attrs:{id:"grid"},on:{click:function(e){return e.preventDefault(),t.changeDisplay(!1)}}},[a("i",{staticClass:"fa fa-th",attrs:{"aria-hidden":"true"}}),t._v(" Grid ")])])])]),a("div",{staticClass:"row"},t._l(t.forSale,(function(e){return a("Item",{key:e.id,attrs:{idx:e.id,description:e.description,price:e.price,quantity:e.quantity,thumbnail_url:e.thumbnail_url,title:e.title,displayList:t.displayList}})})),1)])},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3 col-sm-6 col-md-4 item",class:{"list-group-item":t.displayList}},[a("div",{staticClass:"thumbnail card"},[a("div",{staticClass:"img-event intrinsic"},[a("img",{staticClass:"grow thumbnail-image card-img-top intrinsic-item p-3",attrs:{src:t.thumbnail_url,alt:""}})]),a("div",{staticClass:"card-body"},[a("h6",{staticClass:"card-subtitle mb-2 remain"},[t._v(t._s(t.quantity)+" left in stock")]),a("p",{staticClass:"card-text truncate"},[t._v(t._s(t._f("shortDescription")(t.description)))]),a("div",{staticClass:"row"},[a("p",{staticClass:"col-6 lead"},[t._v("$"+t._s(t.price))]),a("p",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-success pull-right",attrs:{disabled:0===t.quantity},on:{click:function(e){return t.addToCart(t.idx)}}},[t._v(" Add to cart ")])])])])])])},c=[],l=function(t){return"$".concat(t/100)},u={name:"item",props:["description","idx","price","quantity","thumbnail_url","title","displayList"],filters:{dollars:l,shortDescription:function(t){return t&&t.length>100?t.substring(0,100)+"...":t}},methods:{addToCart:function(t){this.$store.commit("addToCart",t)}}},d=u,m=(a("48e6"),a("2877")),p=Object(m["a"])(d,o,c,!1,null,"19825a08",null),f=p.exports,h={name:"app",data:function(){return{displayList:!1}},computed:{forSale:function(){return this.$store.getters.forSale},inCart:function(){return this.$store.getters.inCart}},mounted:function(){this.$store.dispatch("getForSaleProducts")},components:{Item:f},methods:{changeDisplay:function(t){this.displayList=t}}},g=h,v=Object(m["a"])(g,i,r,!1,null,null,null),b=v.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-primary",attrs:{"data-toggle":"modal","data-target":"#shoppingCart"}},[a("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(" ( "+t._s(t.numInCart)+" ) ")]),a("div",{staticClass:"modal fade",attrs:{id:"shoppingCart"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table"},[a("tbody",[t._l(t.cart,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.title))]),a("td",[t._v("$"+t._s(e.price))]),a("td",[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.removeFromCart(t.index)}}},[t._v("×")])])])})),a("tr",[a("th"),a("th",[t._v("$"+t._s(t.total))]),a("th")])],2)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal"}},[t._v("Keep shopping")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.checkout()}}},[t._v("Check out")])])])])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[a("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(" Shopping cart ")]),a("button",{staticClass:"close",attrs:{"data-dismiss":"modal"}},[t._v(" × ")])])}],y=(a("7db0"),a("d81d"),a("13d5"),a("5530")),k=a("2f62"),O={name:"ShoppingCart",filters:{dollars:l},computed:Object(y["a"])({inCart:function(){return this.$store.getters.inCart},numInCart:function(){return this.inCart.length},cart:function(){var t=this;return this.$store.getters.inCart.map((function(e){return t.$store.getters.forSale.find((function(t){return e===t.id}))}))},total:function(){return this.cart.reduce((function(t,e){return t+e.price}),0)},isAuthenticated:function(){return this.$store.state.user.isAuthenticated}},Object(k["c"])([])),methods:Object(y["a"])(Object(y["a"])({},Object(k["b"])(["addMessage"])),{},{removeFromCart:function(t){this.$store.dispatch("removeFromCart",t)},checkout:function(){this.isAuthenticated?0!=this.numInCart||this.addMessage({messageClass:"warning",message:"Your cart is empty!"}):this.addMessage({messageClass:"warning",message:"Please login to checkout"})}})},w=O,E=Object(m["a"])(w,C,_,!1,null,null,null),S=E.exports,$=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("h4",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[t._v("Logging in ...")])])}],M=(a("b0c0"),{name:"Login",mounted:function(){var t=this.$route.query.name,e=this.$route.query.email,a=this.$route.query.id_token,s={name:t,email:e,idToken:a};t&&e&&a&&""!=t&&""!=e&&""!=a?this.$store.commit("login",s):this.$store.commit("logout"),this.$router.push("/")}}),x=M,A=Object(m["a"])(x,$,j,!1,null,"24710aea",null),L=A.exports,T=[{path:"/",component:b,name:"mainpage"},{path:"/cart",component:S,name:"shoppingcart"},{path:"/loginwithtoken",component:L,name:"loginwithtoken"},{path:"*",redirect:"/"}],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column sticky-footer-wrapper"},[a("main",{staticClass:"flex-fill"},[a("NavHeader"),a("MessageComponent"),a("div",{staticClass:"container mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("router-view")],1)])])],1),t._m(0)])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"navbar-default navbar-bottom navbar-dark bg-dark"},[a("div",{staticClass:"container-fluid"},[a("p",{staticClass:"text-center nav-bar mb-0"},[t._v("Checkout repository at "),a("a",{attrs:{href:"https://github.com/ittus/vuejs-firebase-shopping-cart",target:"_blank"}},[t._v(" https://github.com/ittus/vuejs-firebase-shopping-cart ")])])])])}],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark",attrs:{role:"navigation"}},[a("div",{staticClass:"container"},[a("router-link",{staticClass:"navbar-brand mr-auto",attrs:{to:"/"}},[t._v("Blue Online Store")]),a("ul",{staticClass:"navbar-nav mr-auto"}),a("ul",{staticClass:"nav navbar-nav"},[t.isAuthenticated?t._e():a("router-link",{staticClass:"nav-item",attrs:{to:"/",tag:"li","active-class":"active"}},[a("a",{staticClass:"nav-link",on:{click:t.onLoginClicked}},[t._v("Login")])]),t.isAuthenticated?a("li",{staticClass:"li-pointer nav-item"},[a("div",{staticClass:"dropdown"},[a("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.getUserName())+" ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Account Settings")]),a("a",{staticClass:"dropdown-item",on:{click:t.onLogoutClicked}},[t._v("Logout "+t._s(t.userEmail))])])])]):t._e(),a("li",[a("ShoppingCart")],1)],1)],1)])},P=[],R={components:{ShoppingCart:S},name:"NavHeader",data:function(){return{webApiUrl:this.$store.state.endpoints.api+"manage",isNavOpen:!1,isLoggedIn:!1}},computed:{userEmail:function(){return this.isLoggedIn?this.currentUser.email:""},isAuthenticated:function(){return this.$store.state.user.isAuthenticated},isAuthenticationEnabled:function(){return"authentication-enabled-yes"==this.$store.state.authenticationEnabled},inCart:function(){return this.$store.getters.inCart},numInCart:function(){return this.inCart.length}},methods:{toggleNavbar:function(){this.isNavOpen=!this.isNavOpen},onLoginClicked:function(){window.location=this.$store.state.endpoints.login},onLogoutClicked:function(){this.$store.commit("logout")},getUserName:function(){return this.$store.state.user.name}}},B=R,N=(a("cc98"),Object(m["a"])(B,G,P,!1,null,"ab62696a",null)),q=N.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:(t.showMessageBar?"":"d-none")+"  message-bar"},[a("div",{class:t.messageClass},[a("Button",{staticClass:"btn btn-link close-btn",attrs:{bsStyle:"link"},on:{click:t.closeMessageBar}},[a("i",{staticClass:"fa fa-times"})]),a("div",[t._v(t._s(t.currentMessage))])],1)])},U=[],H={computed:Object(y["a"])(Object(y["a"])({},Object(k["c"])(["messages"])),{},{showMessageBar:function(){return this.messages.message&&this.messages.message.length>0},messageClass:function(){var t=this.messages.messageClass;return"col-12 panel panel-"+t+" "+(this.showMessageBar?"":"hidden")},currentMessage:function(){return this.messages.message}}),methods:Object(y["a"])(Object(y["a"])({},Object(k["b"])(["clearMessage"])),{},{closeMessageBar:function(){this.clearMessage()}})},J=H,V=(a("0699"),Object(m["a"])(J,I,U,!1,null,"54baee6e",null)),K=V.exports,Y={components:{NavHeader:q,MessageComponent:K},methods:{},created:function(){}},z=Y,Q=(a("034f"),Object(m["a"])(z,D,F,!1,null,null,null)),W=Q.exports,X=(a("a434"),a("bc3a")),Z=a.n(X),tt=a("0e44");s["a"].use(k["a"]);var et=new k["a"].Store({plugins:[Object(tt["a"])()],state:{forSale:[],inCart:[],authenticationEnabled:"authentication-enabled-yes",endpoints:{login:"http://localhost:3000/login"},user:{isAuthenticated:!1,name:"",email:"",idToken:""},messageGroup:{messageClass:"",message:"",timeoutEvent:null}},getters:{forSale:function(t){return t.forSale},inCart:function(t){return t.inCart},messages:function(t){return t.messageGroup}},mutations:{addToCart:function(t,e){t.inCart.push(e)},REMOVE_FROM_CART:function(t,e){t.inCart.splice(e,1)},SET_FORSALE:function(t,e){t.forSale=e},logout:function(t){t.user.isAuthenticated=!1,t.user.name="",t.user.email="",t.user.idToken=""},login:function(t,e){t.user.isAuthenticated=!0,t.user.name=e.name,t.user.email=e.email,t.user.idToken=e.idToken},ADD_MESSAGE:function(t,e){var a=e.message,s=e.messageClass;t.messageGroup={messageClass:s,message:a},t.timeoutEvent&&clearTimeout(t.timeoutEvent),t.timeoutEvent=setTimeout((function(){t.messageGroup={messageClass:"",message:""}}),5e3)},CLEAR_MESSAGE:function(t){t.messageGroup={messageClass:"",message:""}}},actions:{addMessage:function(t,e){t.commit("ADD_MESSAGE",e)},clearMessage:function(t){var e=t.commit;e("CLEAR_MESSAGE")},removeFromCart:function(t,e){t.commit("REMOVE_FROM_CART",e)},getForSaleProducts:function(t){var e=t.commit;Z.a.get("http://localhost:8080/products").then((function(t){e("SET_FORSALE",t.data),console.log(t.data)}))}}});s["a"].use(n["a"]);var at=new n["a"]({mode:"history",routes:T});new s["a"]({el:"#app",router:at,store:et,render:function(t){return t(W)}})},"85ec":function(t,e,a){},a4a7:function(t,e,a){},cc98:function(t,e,a){"use strict";a("4076")}});
//# sourceMappingURL=app.51f3531e.js.map